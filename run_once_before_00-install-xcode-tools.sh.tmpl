#!/bin/bash

set -eufo pipefail

{{ if eq .chezmoi.os "darwin" -}}
echo "üîß Installing Xcode Command Line Tools..."

# Check if Xcode Command Line Tools are already installed
if xcode-select -p &> /dev/null; then
    echo "‚è© Xcode Command Line Tools are already installed"
    exit 0
fi

# Install Xcode Command Line Tools
echo "üì¶ Installing Xcode Command Line Tools..."
xcode-select --install

# Wait for installation to complete
echo "‚è≥ Waiting for Xcode Command Line Tools installation to complete..."
until xcode-select -p &> /dev/null; do
    sleep 5
done

echo "‚úÖ Xcode Command Line Tools installation completed"
{{- else -}}
echo "‚ÑπÔ∏è Xcode Command Line Tools installation is only for macOS, skipping"
{{- end }}